{"version":3,"file":"admin_addons2.js","sources":["../../resources/js/admin_addons2.js"],"sourcesContent":["import Cookies from 'js-cookie';\n\nObject.assign(window, { Cookies });\n\njQuery(function($) {\n    // wpColorPicker\n    $('.addon-color-field').wpColorPicker();\n\n    // codemirror\n    if (typeof codemirror_settings !== 'undefined') {\n        const codemirror_css = document.querySelectorAll('.codemirror_css');\n        const codemirror_html = document.querySelectorAll('.codemirror_html');\n\n        function initializeCodeMirror(elements, settings, type) {\n            elements.forEach(el => {\n                if (!el.CodeMirror) {\n                    let editorSettings = settings ? { ...settings } : {};\n                    editorSettings.codemirror = {\n                        ...editorSettings.codemirror,\n                        indentUnit: 3,\n                        tabSize: 3,\n                        autoRefresh: true,\n                    };\n                    el.CodeMirror = wp.codeEditor.initialize(el, editorSettings);\n                }\n            });\n        }\n\n        initializeCodeMirror(codemirror_css, codemirror_settings.codemirror_css, 'CSS');\n        initializeCodeMirror(codemirror_html, codemirror_settings.codemirror_html, 'HTML');\n    }\n\n    $.fn.fadeOutAndRemove = function(speed) {\n        return this.fadeOut(speed, function() {\n            $(this).remove();\n        });\n    };\n\n    $.fn.serializeObject = function() {\n        let obj = {};\n        let array = this.serializeArray();\n        $.each(array, function() {\n            let name = this.name;\n            let value = this.value || '';\n            if (name.indexOf('[]') > -1) {\n                name = name.replace('[]', '');\n                if (!obj[name]) {\n                    obj[name] = [];\n                }\n                obj[name].push(value);\n            } else {\n                if (obj[name] !== undefined) {\n                    if (!Array.isArray(obj[name])) {\n                        obj[name] = [ obj[name] ];\n                    }\n                    obj[name].push(value);\n                } else {\n                    obj[name] = value;\n                }\n            }\n        });\n\n        return obj;\n    };\n\n    // hide notice\n    $(document).on('click', '.notice-dismiss', function(e) {\n        $(this).closest('.notice.is-dismissible')?.fadeOutAndRemove(500);\n    });\n\n    // ajax submit settings\n    $(document).on('submit', '#_settings_form', function(e) {\n        e.preventDefault();\n        let $this = $(this);\n        let $data = $this.serializeObject();\n\n        let btn_submit = $this.find('button[name=\"_submit_settings\"]');\n        let button_text = btn_submit.html();\n        let button_text_loading = '<span class=\"ajax-loader\">&nbsp;</span>';\n\n        btn_submit.prop('disabled', true).html(button_text_loading);\n        $.ajax({\n            type: 'POST',\n            url: ajaxurl,\n            data: {\n                action: 'submit_settings',\n                _data: $data,\n                _ajax_nonce: $this.find('input[name=\"_wpnonce\"]').val(),\n                _wp_http_referer: $this.find('input[name=\"_wp_http_referer\"]').val(),\n            },\n        })\n            .done(function(data) {\n                btn_submit.prop('disabled', false).html(button_text);\n                $this.find('#_content').prepend(data);\n\n                // auto reload tabs\n                if (!window.location.hash ||\n                    window.location.hash === '#global_setting_settings' ||\n                    window.location.hash === '#custom_css_settings' ||\n                    window.location.hash === '#custom_script_settings' ||\n                    (window.location.hash === '#custom_sorting_settings' && $data['order_reset'] !== undefined) ||\n                    (window.location.hash === '#base_slug_settings' && $data['base_slug_reset'] !== undefined)\n                ) {\n                    window.location.reload();\n                }\n\n                // dismissible auto hide\n                setTimeout(() => {\n                    $this.find('#_content')?.find('.dismissible-auto')?.fadeOutAndRemove(400);\n                }, 4000);\n            })\n            .fail(function(jqXHR, textStatus, errorThrown) {\n                btn_submit.prop('disabled', false).html(button_text);\n                console.log(errorThrown);\n            });\n    });\n\n    // filter tabs\n    const $filterTabs = $('.filter-tabs');\n    $filterTabs.each(function() {\n        const $el = $(this),\n            $nav = $el.find('.tabs-nav'),\n            $content = $el.find('.tabs-content'),\n            $tabs = $nav.find('a'),\n            initialHash = window.location.hash;\n\n        const activateTab = (hash) => {\n            const $tab = $nav.find(`a[href=\"${hash}\"]`);\n            $nav.find('a').removeClass('current');\n            $content.find('.tabs-panel').hide();\n\n            if ($tab.length) {\n                $tab.addClass('current');\n                $(hash).show();\n            } else {\n                $tabs.first().addClass('current');\n                $content.find('.tabs-panel').first().show();\n                window.history.replaceState(null, null, window.location.pathname + window.location.search);\n            }\n        };\n\n        activateTab(initialHash || $tabs.first().attr('href'));\n\n        $nav.on('click', 'a', function(e) {\n            e.preventDefault();\n            const hash = $(this).attr('href');\n            window.location.hash = hash;\n            activateTab(hash);\n            $('html, body').animate({ scrollTop: $el.offset().top - $('header').outerHeight() }, 300);\n        });\n\n        $(window).on('hashchange', function() {\n            activateTab(window.location.hash || $tabs.first().attr('href'));\n        });\n    });\n});\n"],"names":["Cookies"],"mappings":"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"}