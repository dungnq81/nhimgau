{"version":3,"file":"workbox.js","sources":["../../resources/js/workbox.js"],"sourcesContent":["importScripts( 'https://storage.googleapis.com/workbox-cdn/releases/7.3.0/workbox-sw.js' );\r\n\r\nlet registerRoute = workbox.routing.registerRoute;\r\nlet CacheFirst = workbox.strategies.CacheFirst;\r\nlet CacheableResponsePlugin = workbox.cacheableResponse.CacheableResponsePlugin;\r\nlet ExpirationPlugin = workbox.expiration.ExpirationPlugin;\r\nlet maxAgeSeconds = 7 * 24 * 60 * 60;\r\nlet maxEntries = 60;\r\n\r\nlet cacheName = 'GAUDEV-workbox-cache';\r\n\r\n/**\r\n * Matches against local static files in assets/css, assets/js, and assets/img folders.\r\n *\r\n * @param {Object} _ref\r\n * @param {Request} _ref.request\r\n * @returns {boolean}\r\n */\r\nlet matchCallback = function matchCallback ( _ref ) {\r\n\tlet request = _ref.request;\r\n\treturn (\r\n\t\trequest.destination === '/wp-content/themes/hd/assets/css/.*' ||\r\n\t\trequest.destination === '/wp-content/themes/hd/assets/js/.*' ||\r\n\t\trequest.destination === '/wp-content/themes/hd/assets/img/.*'\r\n\t);\r\n};\r\n\r\nregisterRoute(\r\n\tmatchCallback,\r\n\tnew CacheFirst( {\r\n\t\tcacheName: cacheName,\r\n\t\tplugins: [\r\n\t\t\tnew CacheableResponsePlugin( {\r\n\t\t\t\tstatuses: [0, 200],\r\n\t\t\t} ),\r\n\t\t\tnew ExpirationPlugin( {\r\n\t\t\t\tmaxEntries: maxEntries,\r\n\t\t\t\tmaxAgeSeconds: maxAgeSeconds,\r\n\t\t\t} ),\r\n\t\t],\r\n\t} )\r\n);\r\n\r\nconsole.log(matchCallback);\r\nconsole.log(ExpirationPlugin);\r\nconsole.log(CacheableResponsePlugin);\r\nconsole.log(CacheFirst);\r\nconsole.log(registerRoute);\r\n\r\n// SELF INSTALL\r\nlet expectedCaches = ['GAUDEV'];\r\n\r\nself.addEventListener( 'install', function ( e ) {\r\n\te.waitUntil(\r\n\t\tcaches.open( 'GAUDEV' ).then( function ( cache ) {\r\n\t\t\treturn cache.addAll( ['/'] );\r\n\t\t} )\r\n\t);\r\n} );\r\n\r\nself.addEventListener( 'activate', function ( event ) {\r\n\tevent.waitUntil(\r\n\t\tcaches\r\n\t\t\t.keys()\r\n\t\t\t.then( function ( keys ) {\r\n\t\t\t\treturn Promise.all(\r\n\t\t\t\t\tkeys.map( function ( key ) {\r\n\t\t\t\t\t\tif ( expectedCaches.includes( key ) ) {\r\n\t\t\t\t\t\t\treturn caches.delete( key );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} )\r\n\t\t\t\t);\r\n\t\t\t} )\r\n\t\t\t.then( function () {\r\n\t\t\t\tconsole.log( 'GAUDEV now ready to handle fetches.' );\r\n\t\t\t} )\r\n\t);\r\n} );\r\n\r\nself.addEventListener( 'fetch', function ( e ) {\r\n\tconsole.log(e.request.url);\r\n\te.respondWith(\r\n\t\tcaches.match( e.request ).then( function ( response ) {\r\n\t\t\treturn response || fetch( e.request );\r\n\t\t} )\r\n\t);\r\n} );\r\n"],"names":["matchCallback"],"mappings":"AAAA,cAAe,yEAAyE;AAExF,IAAI,gBAAgB,QAAQ,QAAQ;AACpC,IAAI,aAAa,QAAQ,WAAW;AACpC,IAAI,0BAA0B,QAAQ,kBAAkB;AACxD,IAAI,mBAAmB,QAAQ,WAAW;AAC1C,IAAI,gBAAgB,IAAI,KAAK,KAAK;AAClC,IAAI,aAAa;AAEjB,IAAI,YAAY;AAShB,IAAI,gBAAgB,SAASA,eAAgB,MAAO;AACnD,MAAI,UAAU,KAAK;AACnB,SACC,QAAQ,gBAAgB,yCACxB,QAAQ,gBAAgB,wCACxB,QAAQ,gBAAgB;AAE1B;AAEA;AAAA,EACC;AAAA,EACA,IAAI,WAAY;AAAA,IACf;AAAA,IACA,SAAS;AAAA,MACR,IAAI,wBAAyB;AAAA,QAC5B,UAAU,CAAC,GAAG,GAAG;AAAA,MACrB,CAAM;AAAA,MACH,IAAI,iBAAkB;AAAA,QACrB;AAAA,QACA;AAAA,MACJ,CAAM;AAAA,IACH;AAAA,EACH,CAAI;AACJ;AAEA,QAAQ,IAAI,aAAa;AACzB,QAAQ,IAAI,gBAAgB;AAC5B,QAAQ,IAAI,uBAAuB;AACnC,QAAQ,IAAI,UAAU;AACtB,QAAQ,IAAI,aAAa;AAGzB,IAAI,iBAAiB,CAAC,QAAQ;AAE9B,KAAK,iBAAkB,WAAW,SAAW,GAAI;AAChD,IAAE;AAAA,IACD,OAAO,KAAM,QAAU,EAAC,KAAM,SAAW,OAAQ;AAChD,aAAO,MAAM,OAAQ,CAAC,GAAG,CAAC;AAAA,IAC7B,CAAK;AAAA,EACL;AACA;AAEA,KAAK,iBAAkB,YAAY,SAAW,OAAQ;AACrD,QAAM;AAAA,IACL,OACE,KAAM,EACN,KAAM,SAAW,MAAO;AACxB,aAAO,QAAQ;AAAA,QACd,KAAK,IAAK,SAAW,KAAM;AAC1B,cAAK,eAAe,SAAU,MAAQ;AACrC,mBAAO,OAAO,OAAQ;UACtB;AAAA,QACP,CAAQ;AAAA,MACR;AAAA,IACA,CAAM,EACF,KAAM,WAAY;AAClB,cAAQ,IAAK;IACjB,CAAM;AAAA,EACN;AACA;AAEA,KAAK,iBAAkB,SAAS,SAAW,GAAI;AAC9C,UAAQ,IAAI,EAAE,QAAQ,GAAG;AACzB,IAAE;AAAA,IACD,OAAO,MAAO,EAAE,OAAO,EAAG,KAAM,SAAW,UAAW;AACrD,aAAO,YAAY,MAAO,EAAE,OAAO;AAAA,IACtC,CAAK;AAAA,EACL;AACA,CAAG;"}